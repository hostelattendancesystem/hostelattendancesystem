# ========================================
# PRODUCTION CONFIGURATION FOR RENDER
# ========================================
# This configuration uses environment variables for sensitive data

# Server Configuration
server.port=${PORT:8081}

# ========================================
# DATABASE CONFIGURATION
# ========================================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://pg-hostelattendancesystem-hostelattendancesystem-1073.h.aivencloud.com:27872/defaultdb?sslmode=require}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:avnadmin}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Settings (Optimized for Free Tier)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false

# ========================================
# EMAIL CONFIGURATION
# ========================================
spring.mail.host=${SPRING_MAIL_HOST:smtp.gmail.com}
spring.mail.port=${SPRING_MAIL_PORT:587}
spring.mail.username=${SPRING_MAIL_USERNAME:hostelattendancesystem@gmail.com}
spring.mail.password=${SPRING_MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# ========================================
# APPLICATION CONFIGURATION
# ========================================
app.attendance.start-time=${APP_ATTENDANCE_START_TIME:19:35}
app.attendance.end-time=${APP_ATTENDANCE_END_TIME:21:25}
app.attendance.verification-delay-min=${APP_ATTENDANCE_VERIFICATION_DELAY_MIN:5}
app.attendance.verification-delay-max=${APP_ATTENDANCE_VERIFICATION_DELAY_MAX:30}
app.attendance.url=${APP_ATTENDANCE_URL:https://erp.silicon.ac.in/estcampus/hostel/db_hostel_attendance.php?oper=CHECK_HOSTEL_ATTENDANCE&studentId=}

# ========================================
# TIMEZONE
# ========================================
spring.jackson.time-zone=Asia/Kolkata

# ========================================
# ACTUATOR CONFIGURATION (Health Checks)
# ========================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true

# ========================================
# LOGGING (Production - Less Verbose)
# ========================================
logging.level.com.college.attendance=INFO
logging.level.org.springframework.web=WARN
logging.level.org.hibernate.SQL=WARN
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# ========================================
# CORS CONFIGURATION (Update with your frontend URL)
# ========================================
# Add your frontend URL when deploying
# cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}
